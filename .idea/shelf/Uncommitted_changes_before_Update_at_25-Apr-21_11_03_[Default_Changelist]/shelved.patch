Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Sat Apr 17 17:09:14 IST 2021\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.5-bin.zip\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
--- gradle/wrapper/gradle-wrapper.properties	(revision 79a52abd32aa077a06247960eabd321aa0718924)
+++ gradle/wrapper/gradle-wrapper.properties	(date 1619015633846)
@@ -1,6 +1,6 @@
-#Sat Apr 17 17:09:14 IST 2021
+#Wed Apr 21 20:03:53 IST 2021
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-all.zip
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44_[Default_Changelist]/shelved.patch	(revision 79a52abd32aa077a06247960eabd321aa0718924)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44_[Default_Changelist]/shelved.patch	(revision 79a52abd32aa077a06247960eabd321aa0718924)
@@ -1,524 +0,0 @@
-Index: build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n    }\r\n    dependencies {\r\n        classpath \"com.android.tools.build:gradle:4.0.2\"\r\n        classpath 'com.google.gms:google-services:4.3.5'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- build.gradle	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ build.gradle	(date 1618488260460)
-@@ -2,6 +2,7 @@
- buildscript {
-     repositories {
-         google()
-+        mavenCentral()
-         jcenter()
-     }
-     dependencies {
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"PLATFORM\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"1.8\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- .idea/gradle.xml	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ .idea/gradle.xml	(date 1618137020495)
-@@ -15,6 +15,7 @@
-           </set>
-         </option>
-         <option name="resolveModulePerSourceSet" value="false" />
-+        <option name="useQualifiedModuleNames" value="true" />
-       </GradleProjectSettings>
-     </option>
-   </component>
-Index: app/src/main/java/com/example/chatapplication/MainActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.chatapplication.SignInActivity;\r\nimport com.example.chatapplication.Adapters.FragmentsAdapter;\r\nimport com.example.chatapplication.databinding.ActivityMainBinding;\r\nimport com.google.android.gms.common.internal.Objects;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    ActivityMainBinding binding;\r\n    FirebaseAuth auth;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n        //setContentView(R.layout.activity_main);\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"message\");\r\n        myRef.setValue(\"\");\r\n        auth = FirebaseAuth.getInstance();\r\n\r\n        binding.viewPager.setAdapter(new FragmentsAdapter(getSupportFragmentManager()));\r\n        binding.tabLayout.setupWithViewPager(binding.viewPager);\r\n\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                String value = dataSnapshot.getValue(String.class);\r\n                Toast.makeText(MainActivity.this, \"Home Page\" + value, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        MenuInflater inflater = getMenuInflater();\r\n        inflater.inflate(R.menu.menu, menu);\r\n        return super.onCreateOptionsMenu(menu);\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.settings:\r\n                Intent intent2 = new Intent(MainActivity.this, SettingsActivity.class);\r\n                startActivity(intent2);\r\n                break;\r\n            case R.id.logout:\r\n                SignInActivity.signOut(this);\r\n                auth.signOut();\r\n                Intent intent = new Intent(MainActivity.this, SignInActivity.class);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);\r\n                startActivity(intent);\r\n                break;\r\n            case R.id.group:\r\n                Intent intent1 = new Intent(MainActivity.this, GroupChatActivity.class);\r\n                startActivity(intent1);\r\n                break;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private boolean exit = false;\r\n    @Override\r\n    public void onBackPressed() {\r\n        if(exit){\r\n            super.onBackPressed();\r\n            finish();\r\n        }else{\r\n            Toast.makeText(this,\"Press back again to exit\",Toast.LENGTH_SHORT).show();\r\n            exit = true;\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    exit = false;\r\n                }\r\n            },3000);\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/MainActivity.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/MainActivity.java	(date 1618491448695)
-@@ -13,6 +13,7 @@
- 
- import com.example.chatapplication.SignInActivity;
- import com.example.chatapplication.Adapters.FragmentsAdapter;
-+import com.example.chatapplication.AddFriendActivity;
- import com.example.chatapplication.databinding.ActivityMainBinding;
- import com.google.android.gms.common.internal.Objects;
- import com.google.firebase.auth.FirebaseAuth;
-@@ -69,6 +70,18 @@
-             case R.id.settings:
-                 Intent intent2 = new Intent(MainActivity.this, SettingsActivity.class);
-                 startActivity(intent2);
-+                break;
-+            case R.id.addfriend:
-+                Intent intent4 = new Intent(MainActivity.this, AddFriendActivity.class);
-+                startActivity(intent4);
-+                break;
-+            case R.id.creategroup:
-+                Intent intent3 = new Intent(MainActivity.this, CreateGroupActivity.class);
-+                startActivity(intent3);
-+                break;
-+            case R.id.group:
-+                Intent intent1 = new Intent(MainActivity.this, GroupChatActivity.class);
-+                startActivity(intent1);
-                 break;
-             case R.id.logout:
-                 SignInActivity.signOut(this);
-@@ -79,10 +92,6 @@
-                 intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
-                 startActivity(intent);
-                 break;
--            case R.id.group:
--                Intent intent1 = new Intent(MainActivity.this, GroupChatActivity.class);
--                startActivity(intent1);
--                break;
-         }
-         return true;
-     }
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.google.gms.google-services'\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.3\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.chatapplication\"\r\n        minSdkVersion 21\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n\r\n    buildFeatures {\r\n        viewBinding true\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\n\r\ndependencies {\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation platform('com.google.firebase:firebase-bom:26.6.0')\r\n    implementation 'com.google.firebase:firebase-auth'\r\n    implementation 'com.google.firebase:firebase-database'\r\n    implementation 'com.google.android.gms:play-services-auth:19.0.0'\r\n    implementation 'com.google.android.material:material:1.3.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.2'\r\n\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n\r\n    implementation 'com.pubnub:pubnub-android:3.7.4'\r\n    implementation 'me.kevingleason:pnwebrtc:1.0.6@aar'\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/build.gradle	(date 1618488803161)
-@@ -44,6 +44,11 @@
-     implementation 'com.google.android.material:material:1.3.0'
-     implementation 'androidx.legacy:legacy-support-v4:1.0.0'
- 
-+    implementation 'com.firebaseui:firebase-ui-database:7.1.1'
-+    implementation 'com.github.bumptech.glide:glide:4.12.0'
-+    implementation 'androidx.preference:preference:1.1.1'
-+    annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0'
-+
-     implementation 'de.hdodenhof:circleimageview:3.1.0'
- 
-     implementation 'com.squareup.picasso:picasso:2.71828'
-Index: app/src/main/java/com/example/chatapplication/ChatDetailActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Message;\r\nimport android.view.View;\r\nimport android.widget.Adapter;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\n\r\nimport com.example.chatapplication.Adapters.ChatAdapter;\r\nimport com.example.chatapplication.Models.MessagesModel;\r\nimport com.example.chatapplication.databinding.ActivityChatDetailBinding;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\n\r\npublic class ChatDetailActivity extends AppCompatActivity {\r\n\r\n    ActivityChatDetailBinding binding;\r\n    FirebaseDatabase database;\r\n    FirebaseAuth auth;\r\n    ImageView imgView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityChatDetailBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n        getSupportActionBar().hide();\r\n        database = FirebaseDatabase.getInstance();\r\n        auth = FirebaseAuth.getInstance();\r\n\r\n        final  String senderId = auth.getUid();\r\n        String receivedId = getIntent().getStringExtra(\"userId\");\r\n        String userName = getIntent().getStringExtra(\"userName\");\r\n        String profilePic = getIntent().getStringExtra(\"profilePic\");\r\n\r\n        binding.userName.setText(userName);\r\n        Picasso.get().load(profilePic).placeholder(R.drawable.avatar).into(binding.profilePic);\r\n\r\n        binding.backArrow.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                Intent intent = new Intent(ChatDetailActivity.this,MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        // Video Call\r\n\r\n        binding.videoCallIcon.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(ChatDetailActivity.this,VideocallActivity.class);\r\n                Bundle extras= new Bundle();\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        final ArrayList <MessagesModel> messagesModels = new ArrayList<>();\r\n\r\n        final ChatAdapter chatAdapter = new ChatAdapter(messagesModels, this , receivedId);\r\n\r\n        binding.chatRecyclerView.setAdapter(chatAdapter);\r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(this);\r\n        binding.chatRecyclerView.setLayoutManager(layoutManager);\r\n\r\n        final String senderRoom = senderId + receivedId;\r\n        final  String receiverRoom = receivedId + senderId;\r\n\r\n        database.getReference().child(\"chats\").child(senderRoom).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                messagesModels.clear();\r\n                for(DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    MessagesModel model = snapshot1.getValue(MessagesModel.class);\r\n                    model.setMessageId(snapshot1.getKey());\r\n\r\n                    messagesModels.add(model);\r\n                }\r\n                chatAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        imgView = findViewById(R.id.attachments4);\r\n        imgView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                attachments atch = new attachments();\r\n                atch.show(getSupportFragmentManager(),atch.getTag());\r\n\r\n            }\r\n        });\r\n\r\n        binding.send.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String message =  binding.etmessage.getText().toString();\r\n                final MessagesModel model = new MessagesModel(senderId,message);\r\n                model.setTimestamp(new Date().getTime());\r\n                binding.etmessage.setText(\"\");\r\n                database.getReference().child(\"chats\").child(senderRoom).push().setValue(model).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        database.getReference().child(\"chats\").child(receiverRoom).push().setValue(model).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                            @Override\r\n                            public void onSuccess(Void aVoid) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/ChatDetailActivity.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/ChatDetailActivity.java	(date 1618481971304)
-@@ -92,6 +92,7 @@
-                     messagesModels.add(model);
-                 }
-                 chatAdapter.notifyDataSetChanged();
-+                binding.chatRecyclerView.smoothScrollToPosition(binding.chatRecyclerView.getAdapter().getItemCount());
-             }
- 
-             @Override
-@@ -117,6 +118,7 @@
-                 final MessagesModel model = new MessagesModel(senderId,message);
-                 model.setTimestamp(new Date().getTime());
-                 binding.etmessage.setText("");
-+                binding.chatRecyclerView.smoothScrollToPosition(binding.chatRecyclerView.getAdapter().getItemCount());
-                 database.getReference().child("chats").child(senderRoom).push().setValue(model).addOnSuccessListener(new OnSuccessListener<Void>() {
-                     @Override
-                     public void onSuccess(Void aVoid) {
-Index: app/src/main/java/com/example/chatapplication/GroupChatActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\n\r\nimport com.example.chatapplication.Adapters.ChatAdapter;\r\nimport com.example.chatapplication.Models.MessagesModel;\r\nimport com.example.chatapplication.databinding.ActivityGroupChatBinding;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\n\r\npublic class GroupChatActivity extends AppCompatActivity {\r\n\r\n    ActivityGroupChatBinding binding;\r\n    ImageView imgView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityGroupChatBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n         getSupportActionBar().hide();\r\n        binding.backArrow.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(GroupChatActivity.this,MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        final FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        final ArrayList<MessagesModel> messagesModels = new ArrayList<>();\r\n\r\n        final String senderId = FirebaseAuth.getInstance().getUid();\r\n        binding.userName.setText(\"Friends Group\");\r\n\r\n        final ChatAdapter adapter = new ChatAdapter(messagesModels,this);\r\n        binding.chatRecyclerView.setAdapter(adapter);\r\n\r\n        LinearLayoutManager linearLayout = new LinearLayoutManager(this);\r\n        binding.chatRecyclerView.setLayoutManager(linearLayout);\r\n\r\n        database.getReference().child(\"GroupChats\").addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                messagesModels.clear();\r\n                for(DataSnapshot dataSnapshot: snapshot.getChildren()){\r\n                   MessagesModel model = dataSnapshot.getValue(MessagesModel.class);\r\n                   messagesModels.add(model);\r\n                }\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        imgView = findViewById(R.id.attachments);\r\n        imgView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                attachments atch = new attachments();\r\n                atch.show(getSupportFragmentManager(),atch.getTag());\r\n\r\n            }\r\n        });\r\n        binding.send.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final  String message = binding.etmessage.getText().toString();\r\n                final MessagesModel model = new MessagesModel(senderId,message);\r\n                model.setTimestamp(new Date().getTime());\r\n                binding.etmessage.setText(\"\");\r\n\r\n                database.getReference().child(\"GroupChats\").push().setValue(model).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/GroupChatActivity.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/GroupChatActivity.java	(date 1618482191109)
-@@ -7,18 +7,24 @@
- import android.app.Activity;
- import android.content.Intent;
- import android.os.Bundle;
-+import android.util.Log;
- import android.view.View;
- import android.widget.ImageView;
- 
- import com.example.chatapplication.Adapters.ChatAdapter;
-+import com.example.chatapplication.Adapters.GroupChatAdapter;
- import com.example.chatapplication.Models.MessagesModel;
-+import com.example.chatapplication.Models.Users;
- import com.example.chatapplication.databinding.ActivityGroupChatBinding;
-+import com.google.android.gms.tasks.OnCompleteListener;
- import com.google.android.gms.tasks.OnSuccessListener;
-+import com.google.android.gms.tasks.Task;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.database.DataSnapshot;
- import com.google.firebase.database.DatabaseError;
- import com.google.firebase.database.FirebaseDatabase;
- import com.google.firebase.database.ValueEventListener;
-+import com.squareup.picasso.Picasso;
- 
- import java.util.ArrayList;
- import java.util.Date;
-@@ -33,7 +39,7 @@
-         super.onCreate(savedInstanceState);
-         binding = ActivityGroupChatBinding.inflate(getLayoutInflater());
-         setContentView(binding.getRoot());
--         getSupportActionBar().hide();
-+        getSupportActionBar().hide();
-         binding.backArrow.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-@@ -45,9 +51,23 @@
-         final ArrayList<MessagesModel> messagesModels = new ArrayList<>();
- 
-         final String senderId = FirebaseAuth.getInstance().getUid();
-+        final String[] senderName = new String[1];
-+        final Users[] user = {null};
-+        database.getReference().child("Users").child(FirebaseAuth.getInstance().getUid())
-+                .addListenerForSingleValueEvent(new ValueEventListener() {
-+                    @Override
-+                    public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                        user[0] = snapshot.getValue(Users.class);
-+                    }
-+
-+                    @Override
-+                    public void onCancelled(@NonNull DatabaseError error) {
-+
-+                    }
-+                });
-         binding.userName.setText("Friends Group");
- 
--        final ChatAdapter adapter = new ChatAdapter(messagesModels,this);
-+        final GroupChatAdapter adapter = new GroupChatAdapter(messagesModels,this);
-         binding.chatRecyclerView.setAdapter(adapter);
- 
-         LinearLayoutManager linearLayout = new LinearLayoutManager(this);
-@@ -62,6 +82,7 @@
-                    messagesModels.add(model);
-                 }
-                 adapter.notifyDataSetChanged();
-+                binding.chatRecyclerView.smoothScrollToPosition(binding.chatRecyclerView.getAdapter().getItemCount());
-             }
- 
-             @Override
-@@ -82,10 +103,10 @@
-             @Override
-             public void onClick(View v) {
-                 final  String message = binding.etmessage.getText().toString();
--                final MessagesModel model = new MessagesModel(senderId,message);
-+                final MessagesModel model = new MessagesModel(senderId, user[0].getUserName(), message);
-                 model.setTimestamp(new Date().getTime());
-                 binding.etmessage.setText("");
--
-+                binding.chatRecyclerView.smoothScrollToPosition(binding.chatRecyclerView.getAdapter().getItemCount());
-                 database.getReference().child("GroupChats").push().setValue(model).addOnSuccessListener(new OnSuccessListener<Void>() {
-                     @Override
-                     public void onSuccess(Void aVoid) {
-Index: app/src/main/res/menu/menu.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\">\r\n    <item\r\n        android:id=\"@+id/settings\"\r\n        android:title=\"Settings\"\r\n        />\r\n    <item\r\n        android:id=\"@+id/logout\"\r\n        android:title=\"Logout\"\r\n        />\r\n    <item\r\n        android:id=\"@+id/group\"\r\n        android:title=\"Groups\"\r\n        />\r\n</menu>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/menu/menu.xml	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/res/menu/menu.xml	(date 1618485531245)
-@@ -1,5 +1,19 @@
- <?xml version="1.0" encoding="utf-8"?>
- <menu xmlns:android="http://schemas.android.com/apk/res/android">
-+    <item
-+        android:id="@+id/addfriend"
-+        android:title="Add Friend"
-+        />
-+
-+
-+    <item
-+        android:id="@+id/creategroup"
-+        android:title="Create Group"
-+        />
-+    <item
-+        android:id="@+id/group"
-+        android:title="Groups"
-+        />
-     <item
-         android:id="@+id/settings"
-         android:title="Settings"
-@@ -8,8 +22,4 @@
-         android:id="@+id/logout"
-         android:title="Logout"
-         />
--    <item
--        android:id="@+id/group"
--        android:title="Groups"
--        />
- </menu>
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.example.chatapplication\">\r\n    <!-- WebRTC Dependencies -->\r\n    <uses-feature android:name=\"android.hardware.camera2\" />\r\n    <uses-feature android:name=\"android.hardware.camera2.autofocus\" />\r\n    <uses-feature\r\n        android:glEsVersion=\"0x00020000\"\r\n        android:required=\"true\" />\r\n\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"android.permission.RECORD_AUDIO\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n    <uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\" /> <!-- PubNub Dependencies -->\r\n    <!-- <uses-permission android:name=\"android.permission.INTERNET\" /> -->\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\r\n    <uses-permission\r\n        android:name=\"com.example.chatapplication.permission.C2D_MESSAGE\"\r\n        android:protectionLevel=\"signature\" />\r\n    <uses-permission android:name=\"com.example.chatapplicationpermission.C2D_MESSAGE\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\">\r\n        <activity android:name=\".VideocallActivity\"></activity>\r\n        <activity android:name=\".SettingsActivity\" />\r\n        <activity android:name=\".GroupChatActivity\" />\r\n        <activity android:name=\".ChatDetailActivity\" />\r\n        <activity android:name=\".SignInActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".SignUpActivity\" />\r\n        <activity android:name=\".MainActivity\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/AndroidManifest.xml	(date 1618546455604)
-@@ -1,25 +1,6 @@
- <?xml version="1.0" encoding="utf-8"?>
- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
-     package="com.example.chatapplication">
--    <!-- WebRTC Dependencies -->
--    <uses-feature android:name="android.hardware.camera2" />
--    <uses-feature android:name="android.hardware.camera2.autofocus" />
--    <uses-feature
--        android:glEsVersion="0x00020000"
--        android:required="true" />
--
--    <uses-permission android:name="android.permission.CAMERA" />
--    <uses-permission android:name="android.permission.RECORD_AUDIO" />
--    <uses-permission android:name="android.permission.INTERNET" />
--    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
--    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> <!-- PubNub Dependencies -->
--    <!-- <uses-permission android:name="android.permission.INTERNET" /> -->
--    <uses-permission android:name="android.permission.WAKE_LOCK" />
--    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
--    <uses-permission
--        android:name="com.example.chatapplication.permission.C2D_MESSAGE"
--        android:protectionLevel="signature" />
--    <uses-permission android:name="com.example.chatapplicationpermission.C2D_MESSAGE" />
- 
-     <application
-         android:allowBackup="true"
-@@ -28,7 +9,9 @@
-         android:roundIcon="@mipmap/ic_launcher_round"
-         android:supportsRtl="true"
-         android:theme="@style/AppTheme">
--        <activity android:name=".VideocallActivity"></activity>
-+        <activity android:name=".AddFriendActivity" />
-+        <activity android:name=".CreateGroupActivity" />
-+        <activity android:name=".VideocallActivity" />
-         <activity android:name=".SettingsActivity" />
-         <activity android:name=".GroupChatActivity" />
-         <activity android:name=".ChatDetailActivity" />
-@@ -42,5 +25,24 @@
-         <activity android:name=".SignUpActivity" />
-         <activity android:name=".MainActivity" />
-     </application>
-+    <uses-feature android:name="android.hardware.camera2" />
-+    <uses-feature android:name="android.hardware.camera2.autofocus" />
-+
-+    <uses-feature
-+        android:glEsVersion="0x00020000"
-+        android:required="true" />
-+    <uses-permission android:name="android.permission.CAMERA" /> <!-- PubNub Dependencies -->
-+    <!-- <uses-permission android:name="android.permission.INTERNET" /> -->
-+    <uses-permission android:name="android.permission.RECORD_AUDIO" />
-+    <uses-permission android:name="android.permission.INTERNET" />
-+    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
-+    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
-+    <uses-permission android:name="android.permission.WAKE_LOCK" />
-+    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
-+    <uses-permission
-+        android:name="com.example.chatapplication.permission.C2D_MESSAGE"
-+        android:protectionLevel="signature" />
-+
-+    <uses-permission android:name="com.example.chatapplicationpermission.C2D_MESSAGE" />
- 
- </manifest>
-\ No newline at end of file
-Index: app/src/main/java/com/example/chatapplication/Models/MessagesModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication.Models;\r\n\r\npublic class MessagesModel {\r\n    String Id, message, messageId;\r\n    Long timestamp;\r\n\r\n    public MessagesModel(String id, String message, Long timestamp) {\r\n        Id = id;\r\n        this.message = message;\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n    public MessagesModel(String id, String message) {\r\n        Id = id;\r\n        this.message = message;\r\n    }\r\n\r\n    public MessagesModel(){\r\n    }\r\n\r\n    public String getMessageId() {\r\n        return messageId;\r\n    }\r\n\r\n    public void setMessageId(String messageId) {\r\n        this.messageId = messageId;\r\n    }\r\n\r\n    public String getId() {\r\n        return Id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        Id = id;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public Long getTimestamp() {\r\n        return timestamp;\r\n    }\r\n\r\n    public void setTimestamp(Long timestamp) {\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/Models/MessagesModel.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/Models/MessagesModel.java	(date 1618466766445)
-@@ -1,7 +1,7 @@
- package com.example.chatapplication.Models;
- 
- public class MessagesModel {
--    String Id, message, messageId;
-+    String Id, userName, message, messageId;
-     Long timestamp;
- 
-     public MessagesModel(String id, String message, Long timestamp) {
-@@ -10,6 +10,11 @@
-         this.timestamp = timestamp;
-     }
- 
-+    public MessagesModel(String id, String userName, String message) {
-+        Id = id;
-+        this.userName = userName;
-+        this.message = message;
-+    }
-     public MessagesModel(String id, String message) {
-         Id = id;
-         this.message = message;
-@@ -34,6 +39,10 @@
-         Id = id;
-     }
- 
-+    public String getUserName() { return userName; }
-+
-+    public void setUserName(String userName) { this.userName = userName; }
-+
-     public String getMessage() {
-         return message;
-     }
-Index: app/src/main/java/com/example/chatapplication/Models/Users.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication.Models;\r\n\r\npublic class Users {\r\n\r\n    String profilepic , userName , mail, password, userId, lastMessage, status;\r\n\r\n    public Users(String profilepic, String userName, String mail, String password, String userId, String lastMessage, String status) {\r\n        this.profilepic = profilepic;\r\n        this.userName = userName;\r\n        this.mail = mail;\r\n        this.password = password;\r\n        this.userId = userId;\r\n        this.lastMessage = lastMessage;\r\n        this.status = status;\r\n    }\r\n\r\n    public Users(){}\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    // SignUp Constructor\r\n    public Users(String userName, String mail, String password) {\r\n        this.userName = userName;\r\n        this.mail = mail;\r\n        this.password = password;\r\n    }\r\n\r\n    public String getStatus() {\r\n        return status;\r\n    }\r\n\r\n    public void setStatus(String status) {\r\n        this.status = status;\r\n    }\r\n\r\n    public String getProfilepic() {\r\n        return profilepic;\r\n    }\r\n\r\n    public void setProfilepic(String profilepic) {\r\n        this.profilepic = profilepic;\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n    }\r\n\r\n    public void setUserName(String userName) {\r\n        this.userName = userName;\r\n    }\r\n\r\n    public String getMail() {\r\n        return mail;\r\n    }\r\n\r\n    public void setMail(String mail) {\r\n        this.mail = mail;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n//    public String getUserId(String key) {\r\n//\r\n//        return userId;\r\n//    }\r\n//\r\n//    public void setUserId(String userId) {\r\n//\r\n//        this.userId = userId;\r\n//    }\r\n\r\n    public String getLastMessage() {\r\n        return lastMessage;\r\n    }\r\n\r\n    public void setLastMessage(String lastMessage) {\r\n        this.lastMessage = lastMessage;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/Models/Users.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/Models/Users.java	(date 1618479630970)
-@@ -1,9 +1,11 @@
- package com.example.chatapplication.Models;
- 
-+import java.util.ArrayList;
-+
- public class Users {
- 
-     String profilepic , userName , mail, password, userId, lastMessage, status;
--
-+    ArrayList<String> groupsIds;
-     public Users(String profilepic, String userName, String mail, String password, String userId, String lastMessage, String status) {
-         this.profilepic = profilepic;
-         this.userName = userName;
-@@ -31,6 +33,12 @@
-         this.password = password;
-     }
- 
-+    public ArrayList<String> getGroups() {
-+        return groupsIds;
-+    }
-+
-+    public void setGroups(ArrayList<String> groups) { this.groupsIds = groupsIds; }
-+
-     public String getStatus() {
-         return status;
-     }
-Index: app/src/main/java/com/example/chatapplication/Adapters/UsersAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication.Adapters;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.chatapplication.ChatDetailActivity;\r\nimport com.example.chatapplication.Models.Users;\r\nimport com.example.chatapplication.R;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.platforminfo.UserAgentPublisher;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class UsersAdapter extends RecyclerView.Adapter<UsersAdapter.ViewHolder>{\r\n\r\n\r\n    ArrayList<Users> list;\r\n    Context context;\r\n\r\n    public UsersAdapter(ArrayList<Users> list, Context context){\r\n        this.list = list;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\n        View view = LayoutInflater.from(context).inflate(R.layout.sample_show_user,parent,false);\r\n\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n\r\n        Users users = list.get(position);\r\n\r\n        Picasso.get().load(users.getProfilepic()).placeholder(R.drawable.avatar).into(holder.image);\r\n        holder.userName.setText(users.getUserName());\r\n\r\n        FirebaseDatabase.getInstance().getReference().child(\"chats\").child(FirebaseAuth.getInstance().getUid()+users.getUserId()).orderByChild(\"timestamp\")\r\n                .limitToLast(1).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.hasChildren()){\r\n                    for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                        holder.lastMessage.setText(snapshot1.child(\"message\").getValue(String.class));\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(context, ChatDetailActivity.class);\r\n                intent.putExtra(\"userId\",users.getUserId());\r\n                intent.putExtra(\"profilePic\",users.getProfilepic());\r\n                intent.putExtra(\"userName\",users.getUserName());\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder{\r\n\r\n        ImageView image;\r\n        TextView userName, lastMessage;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            image = itemView.findViewById(R.id.profile_image);\r\n            userName = itemView.findViewById(R.id.userNameList);\r\n            lastMessage = itemView.findViewById(R.id.lastMessage);\r\n\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/Adapters/UsersAdapter.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/Adapters/UsersAdapter.java	(date 1618496259881)
-@@ -62,10 +62,8 @@
-                     }
-                 }
-             }
--
-             @Override
-             public void onCancelled(@NonNull DatabaseError error) {
--
-             }
-         });
- 
-Index: app/src/main/java/com/example/chatapplication/Adapters/FragmentsAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication.Adapters;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentPagerAdapter;\r\n\r\nimport com.example.chatapplication.Fragments.CallsFragment;\r\nimport com.example.chatapplication.Fragments.ChatsFragment;\r\nimport com.example.chatapplication.Fragments.StatusFragment;\r\n\r\npublic class FragmentsAdapter extends FragmentPagerAdapter {\r\n    public FragmentsAdapter(@NonNull FragmentManager fm) {\r\n        super(fm);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment getItem(int position) {\r\n        switch(position) {\r\n            case 0: return new ChatsFragment();\r\n            case 1: return new StatusFragment();\r\n            case 2: return new CallsFragment();\r\n            default: return new ChatsFragment();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return 3;\r\n    }\r\n    @Nullable\r\n    @Override\r\n    public CharSequence getPageTitle(int position) {\r\n        String title = null;\r\n        if (position == 0) {\r\n            title =\"CHATS\";\r\n        }\r\n        if (position == 1) {\r\n            title =\"STATUS\";\r\n        }\r\n        if (position == 2) {\r\n            title =\"CALLS\";\r\n        }\r\n        return title;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/Adapters/FragmentsAdapter.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/Adapters/FragmentsAdapter.java	(date 1618145541299)
-@@ -8,6 +8,7 @@
- 
- import com.example.chatapplication.Fragments.CallsFragment;
- import com.example.chatapplication.Fragments.ChatsFragment;
-+import com.example.chatapplication.Fragments.GroupFragment;
- import com.example.chatapplication.Fragments.StatusFragment;
- 
- public class FragmentsAdapter extends FragmentPagerAdapter {
-@@ -20,7 +21,7 @@
-     public Fragment getItem(int position) {
-         switch(position) {
-             case 0: return new ChatsFragment();
--            case 1: return new StatusFragment();
-+            case 1: return new GroupFragment();
-             case 2: return new CallsFragment();
-             default: return new ChatsFragment();
-         }
-@@ -38,7 +39,7 @@
-             title ="CHATS";
-         }
-         if (position == 1) {
--            title ="STATUS";
-+            title ="GROUPS";
-         }
-         if (position == 2) {
-             title ="CALLS";
-Index: app/src/main/java/com/example/chatapplication/Adapters/ChatAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.chatapplication.Adapters;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.chatapplication.Models.MessagesModel;\r\nimport com.example.chatapplication.R;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Objects;\r\n\r\npublic class ChatAdapter extends  RecyclerView.Adapter {\r\n\r\n    ArrayList <MessagesModel> messagesModels;\r\n    Context context;\r\n    String recId;\r\n\r\n    int SENDER_VIEW_TYPE = 1;\r\n    int RECEIVER_VIEW_TYPE = 2;\r\n\r\n    public ChatAdapter(ArrayList<MessagesModel> messagesModels, Context context) {\r\n        this.messagesModels = messagesModels;\r\n        this.context = context;\r\n    }\r\n\r\n    public ChatAdapter(ArrayList<MessagesModel> messagesModels, Context context, String recId) {\r\n        this.messagesModels = messagesModels;\r\n        this.context = context;\r\n        this.recId = recId;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        if (viewType==SENDER_VIEW_TYPE ){\r\n           View  view = LayoutInflater.from( context ).inflate(R.layout.sample_sender ,parent ,false);\r\n           return new SenderViewHolder(view);\r\n        }\r\n        else {\r\n            View  view;\r\n            view = LayoutInflater.from( context ).inflate(R.layout.sample_receiver ,parent ,false);\r\n            return new ReceiverViewHolder(view);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n     MessagesModel messagesModel = messagesModels.get(position);\r\n\r\n     holder.itemView.setOnLongClickListener(new View.OnLongClickListener() {\r\n         @Override\r\n         public boolean onLongClick(View v) {\r\n             new AlertDialog.Builder(context).setTitle(\"Delete\").setMessage(\"Are you sure you want to delete this message\")\r\n                     .setPositiveButton(\"YES\", new DialogInterface.OnClickListener() {\r\n                         @Override\r\n                         public void onClick(DialogInterface dialog, int which) {\r\n                             FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                             String senderRoom = FirebaseAuth.getInstance().getUid() + recId;\r\n                             database.getReference().child(\"chats\").child(senderRoom)\r\n                                     .child(messagesModel.getMessageId()).setValue(null);\r\n                         }\r\n                     }).setNegativeButton(\"NO\", new DialogInterface.OnClickListener() {\r\n                 @Override\r\n                 public void onClick(DialogInterface dialog, int which) {\r\n                     dialog.dismiss();;\r\n                 }\r\n             }).show();\r\n\r\n             return false;\r\n         }\r\n     });\r\n\r\n       if(holder.getClass() == SenderViewHolder.class){\r\n           ((SenderViewHolder) holder).senderMsg.setText(messagesModel.getMessage());\r\n       }\r\n       else {\r\n           ((ReceiverViewHolder)holder).receiverMsg.setText(messagesModel.getMessage());\r\n       }\r\n    }\r\n\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n        if(messagesModels.get(position).getId().equals(FirebaseAuth.getInstance().getUid()))\r\n            return   SENDER_VIEW_TYPE;\r\n        else\r\n            return RECEIVER_VIEW_TYPE;\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return messagesModels.size();\r\n    }\r\n\r\n    public class ReceiverViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        TextView receiverMsg,receiverTime;\r\n\r\n        public ReceiverViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            receiverMsg = itemView.findViewById(R.id.receiverText);\r\n            receiverTime = itemView.findViewById(R.id.receiverTime);\r\n        }\r\n    }\r\n\r\n    public  class  SenderViewHolder extends  RecyclerView.ViewHolder{\r\n        TextView senderMsg,senderTime;\r\n\r\n        public SenderViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            senderMsg = itemView.findViewById(R.id.senderText);\r\n            senderTime = itemView.findViewById(R.id.sendetTime);\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/chatapplication/Adapters/ChatAdapter.java	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/java/com/example/chatapplication/Adapters/ChatAdapter.java	(date 1618465291430)
-@@ -16,7 +16,9 @@
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.database.FirebaseDatabase;
- 
-+import java.text.SimpleDateFormat;
- import java.util.ArrayList;
-+import java.util.Date;
- import java.util.Objects;
- 
- public class ChatAdapter extends  RecyclerView.Adapter {
-@@ -82,9 +84,15 @@
- 
-        if(holder.getClass() == SenderViewHolder.class){
-            ((SenderViewHolder) holder).senderMsg.setText(messagesModel.getMessage());
-+           SimpleDateFormat formatter = new SimpleDateFormat("h:mm a");
-+           String timeString = formatter.format(new Date(messagesModel.getTimestamp()));
-+           ((SenderViewHolder) holder).senderTime.setText(timeString);
-        }
-        else {
-            ((ReceiverViewHolder)holder).receiverMsg.setText(messagesModel.getMessage());
-+           SimpleDateFormat formatter = new SimpleDateFormat("h:mm a");
-+           String timeString = formatter.format(new Date(messagesModel.getTimestamp()));
-+           ((ReceiverViewHolder) holder).receiverTime.setText(timeString);
-        }
-     }
- 
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">ChatApplication</string>\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"STDBY_SUFFIX\">-stdby</string>\r\n    <string name=\"USER_NAME\">user_name</string>\r\n    <string name=\"JSON_CALL_USER\">call_user</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/values/strings.xml	(revision 107abb3f645b98124261ce8d4bbb44336c3f56dd)
-+++ app/src/main/res/values/strings.xml	(date 1618488802459)
-@@ -5,4 +5,20 @@
-     <string name="STDBY_SUFFIX">-stdby</string>
-     <string name="USER_NAME">user_name</string>
-     <string name="JSON_CALL_USER">call_user</string>
-+    <string name="title_activity_settings2">SettingsActivity2</string>
-+
-+    <!-- Preference Titles -->
-+    <string name="messages_header">Messages</string>
-+    <string name="sync_header">Sync</string>
-+
-+    <!-- Messages Preferences -->
-+    <string name="signature_title">Your signature</string>
-+    <string name="reply_title">Default reply action</string>
-+
-+    <!-- Sync Preferences -->
-+    <string name="sync_title">Sync email periodically</string>
-+    <string name="attachment_title">Download incoming attachments</string>
-+    <string name="attachment_summary_on">Automatically download attachments for incoming emails
-+    </string>
-+    <string name="attachment_summary_off">Only download attachments when manually requested</string>
- </resources>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44__Default_Changelist_.xml	(revision 79a52abd32aa077a06247960eabd321aa0718924)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44__Default_Changelist_.xml	(revision 79a52abd32aa077a06247960eabd321aa0718924)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16-Apr-21_09_44_[Default_Changelist]" date="1618546857865" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16-Apr-21_09_44_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16-Apr-21 09:44 [Default Changelist]" />
-</changelist>
\ No newline at end of file
